<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZZAZZT ART モバイル</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script> <!-- フリック用 -->
</head>
<body>

    <!-- ✅ ヘッダー -->
    <header class="header">
        <img src="mat/zzazztart_title.png" alt="タイトル画像" class="title-image">
        <div class="hamburger" id="hamburger">&#9776;</div> <!-- ハンバーガーアイコン -->
        <nav class="menu" id="menu">
            <a href="#" class="menu-link active" data-page="page1.html">Original<br>オリジナル</a>
            <a href="#" class="menu-link disabled">Fan art<br>ファンアート</a>
            <a href="#" class="menu-link" data-page="page2.html">Jujutsu<br>呪術廻戦</a>
            <a href="#" class="menu-link" data-page="page3.html">Twst<br>ツイステ</a>
            <a href="#" class="menu-link" data-page="contact.html">Contact<br>連絡先</a>
        </nav>
    </header>

    <!-- ✅ サムネイル一覧（ボディコンテンツ） -->
    <div class="body-container"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            loadPage("page1.html"); // ✅ 初回ロード
            setupMenuClickEvents();
        });

        function loadPage(page) {
            const bodyContainer = document.querySelector(".body-container");

            fetch(page)
                .then(response => response.text())
                .then(data => {
                    bodyContainer.innerHTML = data;
                    setTimeout(() => {
                        setupThumbnailClickEvents(); // ✅ サムネイルのクリックイベントを適用
                    }, 100);
                })
                .catch(error => console.error("エラー:", error));
        }

        function setupMenuClickEvents() {
            const hamburger = document.getElementById("hamburger");
            const menu = document.getElementById("menu");

            hamburger.addEventListener("click", function (event) {
                event.stopPropagation();
                menu.classList.toggle("active");
            });

            // メニュー外をクリックしたら閉じる
            document.addEventListener("click", function (event) {
                if (!menu.contains(event.target) && !hamburger.contains(event.target)) {
                    menu.classList.remove("active");
                }
            });

            // メニューのリンクをクリックしたら閉じる
            document.querySelectorAll(".menu-link").forEach(link => {
                link.addEventListener("click", function (event) {
                    event.preventDefault();
                    loadPage(this.getAttribute("data-page"));
                    menu.classList.remove("active");
                });
            });
        }

        function setupThumbnailClickEvents() {
            const thumbnails = document.querySelectorAll(".thumbnail img");
            const overlay = document.getElementById("overlay");
            const overlayImage = document.getElementById("overlayImage");

            let currentIndex = 0;
            let imageList = Array.from(thumbnails);

            thumbnails.forEach((thumbnail, index) => {
                thumbnail.addEventListener("click", function () {
                    currentIndex = index;
                    showImage();
                });
            });

            function showImage() {
                overlayImage.src = imageList[currentIndex].getAttribute("data-large");
                overlay.style.display = "flex";
            }

            // ✅ フリック操作を追加
            const hammer = new Hammer(overlay);
            hammer.on("swipeleft", function () {
                if (currentIndex < imageList.length - 1) {
                    currentIndex++;
                    showImage();
                }
            });

            hammer.on("swiperight", function () {
                if (currentIndex > 0) {
                    currentIndex--;
                    showImage();
                }
            });

            // ✅ クリックでオーバーレイを閉じる
            overlay.addEventListener("click", function (event) {
                if (!event.target.classList.contains("arrow")) {
                    overlay.style.display = "none";
                    overlayImage.src = "";
                }
            });
        }
    </script>

</body>
</html>